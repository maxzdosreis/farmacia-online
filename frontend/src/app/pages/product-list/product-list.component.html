<div class="page-header">
  <div class="d-flex justify-content-between align-items-center">
    <div>
      <h1 class="page-title">üíä Gerenciamento de Produtos</h1>
      <p class="page-subtitle">Gerencie o cat√°logo completo da sua farm√°cia online</p>
    </div>
    <a routerLink="/create" class="btn btn-primary btn-lg">
      Novo Produto
    </a>
  </div>
</div>

<div class="search-bar">
    <form class="search-form" (submit)="search()">
        <div class="search-input-group">
            <label class="form-label">Pesquisar produto</label>
            <input 
            type="text"
            class="form-control"
            [(ngModel)]="searchTerm"
            name="searchTerm"
            placeholder="Digite o nome do medicamento, vitamina..."
            (keyup.enter)="search()"
            >
        </div>
        <button type="submit" class="btn btn-primary" [disabled]="isLoading">
            <span *ngIf="!isLoading">Buscar</span>
            <span *ngIf="isLoading">Buscando...</span>
        </button>
    </form>
</div>

<div *ngIf="errorMessage" class="alert error-message">
  <span class="alert-icon">‚ö†Ô∏è</span>
  <span>{{ errorMessage }}</span>
</div>

<div *ngIf="isLoading" class="alert loading-message">
  <span class="alert-icon">‚è≥</span>
  <span>Carregando produtos...</span>
</div>

<div *ngIf="!isLoading && !errorMessage && products.length === 0" class="empty-state">
    <div class="empty-state-icon">üì¶</div>
    <h2 class="empty-state-title">Nenhum produto encontrado</h2>
    <p class="empty-state-description">
    {{ searchTerm ? 'Tente buscar com outro termo ou limpe os filtros.' : 'Comece cadastrando seu primeiro produto!' }}
    </p>
</div>

<div *ngIf="!isLoading && products.length > 0" class="card slide-up">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h2 class="card-title">Lista de Produtos</h2>
    </div>
    <div class="card-body">
        <div class="table-container">
            <table class="table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nome</th>
                        <th>Categoria</th>
                        <th>Pre√ßo</th>
                        <th>Status</th>
                        <th class="text-center">A√ß√µes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let product of products">
                        <td><strong>#{{ product.id }}</strong></td>
                        <td>
                            <strong>{{ product.name }}</strong>
                            <div *ngIf="product.description" style="font-size: 0.875rem; color: var(--text-secondary); margin-top: 4px;">
                                {{ product.description }}
                            </div>
                        </td>
                        <td>
                            <span *ngIf="product.category" style="background: var(--primary-light); color: var(--primary-dark); padding: 4px 12px; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">
                                {{ product.category }}
                            </span>
                            <span *ngIf="!product.category" style="color: var(--text-secondary);">‚Äî</span>
                        </td>
                        <td>
                            <strong style="color: var(--primary-color); font-size: 1.125rem;">
                                {{ product.price | currency:'BRL' }}
                            </strong>
                        </td>
                        <td>
                            <span 
                                class="badge"
                                [class.badge-success]="product.active"
                                [class.badge-danger]="!product.active"
                            >
                                {{ product.active ? '‚úì Ativo' : '‚úó Inativo' }}
                            </span>
                        </td>
                        <td>
                            <div class="table-actions">
                                <a [routerLink]="['/edit', product.id]" class="btn btn-secondary btn-sm">‚úèÔ∏è Editar</a>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<div *ngIf="!isLoading && products.length > 0" class="pagination slide-up">
    <button 
        class="btn btn-outline btn-sm"
        (click)="loadProducts(currentPage - 1)" 
        [disabled]="currentPage === 1 || isLoading">
        ‚Üê Anterior
    </button>

    <span class="pagination-info">
        P√°gina <strong>{{ currentPage }}</strong> de <strong>{{ lastPage }}</strong>
    </span>

    <button
        class="btn btn-outline btn-sm"
        (click)="loadProducts(currentPage + 1)" 
        [disabled]="currentPage === lastPage || isLoading">
        Pr√≥xima ‚Üí
    </button>
</div>